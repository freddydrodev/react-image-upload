{"version":3,"sources":["/Users/drofreddyjuniordiomande/.apps/libs/react-image-upload/dist/index.js","../src/index.tsx","../src/ReactImagePicker.tsx","../src/styles.ts","../src/uploadImageToFirebase.ts"],"names":["me","Object","create","C","defineProperty","pe","getOwnPropertyDescriptor","ue","getOwnPropertyNames","de","getPrototypeOf","fe","prototype","hasOwnProperty","ve","e","r","o","get","enumerable","B","d","l","call","E","__esModule","value","he","index_exports","__export","ReactImagePicker","default","index_default","uploadImageToFirebase","module","exports","__toCommonJS","React","require","import_dropzone","import_react_dropzone","import_react_use","import_react","Container","f","styled","display","flexDirection","border","DropzoneContainer","gap","padding","variants","isDisabled","true","cursor","false","Title","fontWeight","fontSize","lineHeight","textAlign","margin","marginTop","Description","Message","color","hasError","ImageGrid","maxHeight","gridTemplateColumns","gridColumns","defaultVariants","ImageContainer","position","width","height","borderRadius","overflow","objectFit","singleImage","maxWidth","DeleteButton","alignItems","justifyContent","boxShadow","backgroundColor","Overlay","zIndex","top","left","backdropFilter","transition","opacity","q","Dropzone","autoDiscover","getRuleValueAndMessage","rule","message","DEFAULT_RULES","maxSize","maxFiles","accepted","validateFile","file","rules","maxSizeMessage","acceptedMessage","size","toFixed","acceptedTypes","Array","isArray","map","type","toLowerCase","fileExtension","name","split","pop","fileType","some","startsWith","join","images","onImagesChanged","label","description","validate","deleteIcon","deleteBtnColor","deleteIconColor","renderImage","hideTitle","sectionGap","imageGap","imageGridCount","imageBorderRadius","style","className","props","maxFilesMessage","t","useState","files","setFiles","previewUrls","setPreviewUrls","validationMessage","setValidationMessage","isValidating","setIsValidating","generatePreviewUrls","useCallback","urls","URL","createObjectURL","extension","mimeType","fileWithMimeType","File","K","useMount","useEffect","forEach","url","revokeObjectURL","result","error","Error","_","useDropzone","accept","reduce","acc","minSize","multiple","onDropRejected","fileRejections","event","uniqueErrors","rejection","errors","code","filter","index","self","indexOf","onDrop","acceptedFiles","length","validationErrors","processedFiles","newList","_file","getRootProps","getInputProps","reachedLimit","createElement","fileIsString","previewUrl","imgProps","src","alt","key","toString","onClick","_files","stopPropagation","DeleteIcon","xmlns","fill","viewBox","import_storage","import_nanoid","storage","isProd","path","_path","fullPath","storageRef","uploadTask","fileId","endsWith","slice","trim","ee","nanoid","I","ref","uploadBytesResumable","getDownloadURL","snapshot"],"mappings":"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","sourcesContent":["\"use strict\";var me=Object.create;var C=Object.defineProperty;var pe=Object.getOwnPropertyDescriptor;var ue=Object.getOwnPropertyNames;var de=Object.getPrototypeOf,fe=Object.prototype.hasOwnProperty;var ve=(e,r)=>{for(var o in r)C(e,o,{get:r[o],enumerable:!0})},B=(e,r,o,d)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let l of ue(r))!fe.call(e,l)&&l!==o&&C(e,l,{get:()=>r[l],enumerable:!(d=pe(r,l))||d.enumerable});return e};var E=(e,r,o)=>(o=e!=null?me(de(e)):{},B(r||!e||!e.__esModule?C(o,\"default\",{value:e,enumerable:!0}):o,e)),he=e=>B(C({},\"__esModule\",{value:!0}),e);var Re={};ve(Re,{ReactImagePicker:()=>V,default:()=>Ie,uploadImageToFirebase:()=>we});module.exports=he(Re);var t=E(require(\"react\")),q=E(require(\"dropzone\")),_=require(\"react-dropzone\"),K=require(\"react-use\");var f=require(\"@stitches/react\"),H=(0,f.styled)(\"div\",{display:\"flex\",flexDirection:\"column\",border:\"1px dashed #e0e0e0\"}),Z=(0,f.styled)(\"div\",{display:\"flex\",flexDirection:\"column\",gap:\"15px\",border:0,padding:0,variants:{isDisabled:{true:{cursor:\"auto\"},false:{cursor:\"pointer\"}}}}),G=(0,f.styled)(\"h2\",{fontWeight:700,fontSize:\"2rem\",lineHeight:\"1em\",textAlign:\"center\",margin:0,marginTop:\"15px\"}),O=(0,f.styled)(\"p\",{fontWeight:500,fontSize:\"1rem\",lineHeight:\"1.3em\",textAlign:\"center\",margin:0}),Q=(0,f.styled)(\"p\",{fontSize:\"0.75rem\",lineHeight:\"1.66\",textAlign:\"center\",margin:0,color:\"rgba(0, 0, 0, 0.5)\",variants:{hasError:{true:{color:\"#d32f2f\",fontSize:\"0.8rem\"},false:{color:\"inherit\"}}}}),N=(0,f.styled)(\"div\",{display:\"grid\",maxHeight:380,gridTemplateColumns:\"repeat(var(--grid-columns, 3), 1fr)\",gap:\"var(--image-gap, 10px)\",variants:{gridColumns:{value:{\"--grid-columns\":\"var(--grid-columns-value, 3)\",\"--image-gap\":\"var(--image-gap-value, 10px)\"}}},defaultVariants:{gridColumns:\"value\"}}),J=(0,f.styled)(\"div\",{position:\"relative\",width:\"100%\",height:\"100%\",borderRadius:\"var(--image-border-radius-value, 15px)\",overflow:\"hidden\",\"& img\":{width:\"100%\",height:\"100%\",objectFit:\"cover\",borderRadius:\"var(--image-border-radius-value, 15px)\"},variants:{singleImage:{true:{maxWidth:\"400px\",margin:\"0 auto\"}}}}),X=(0,f.styled)(\"button\",{width:32,height:32,borderRadius:\"50%\",border:\"none\",cursor:\"pointer\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",padding:0,boxShadow:\"none\",variants:{color:{default:{backgroundColor:\"#f44336\",color:\"#ffffff\"}}}}),Y=(0,f.styled)(\"div\",{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",width:\"100%\",height:\"100%\",borderRadius:\"15px\",zIndex:10,position:\"absolute\",top:0,left:0,backgroundColor:\"rgba(255,255,255,0)\",backdropFilter:\"blur(0)\",transition:\"all linear 0.25s\",opacity:0,\"&:hover\":{backgroundColor:\"rgba(255,255,255,0.25)\",backdropFilter:\"blur(5px)\",opacity:1}});q.default.autoDiscover=!1;var j=e=>e?typeof e==\"object\"&&\"value\"in e?{value:e.value,message:e.message}:{value:e}:{value:void 0},be={maxSize:{value:5*1024*1024,message:\"File size must be less than 5MB\"},maxFiles:{value:1,message:\"Maximum 1 file allowed\"},accepted:{value:\"image/*\",message:\"Only image files are accepted\"}},xe=(e,r)=>{let{value:o,message:d}=j(r.maxSize),{value:l,message:h}=j(r.accepted);if(o&&e.size>o)return d??`File size must be less than ${(o/(1024*1024)).toFixed(1)}MB`;if(l){let y=Array.isArray(l)?l.map(v=>v.toLowerCase()):[l.toLowerCase()],M=`.${e.name.split(\".\").pop()?.toLowerCase()}`,b=e.type.toLowerCase();if(!y.some(v=>v===\"image/*\"?b.startsWith(\"image/\"):v===M||v===b))return h??`File type not accepted. Accepted types: ${y.join(\", \")}`}return null},V=({images:e=[],onImagesChanged:r,rules:o=be,label:d=\"Images\",description:l,validate:h,deleteIcon:y,deleteBtnColor:M=\"#f44336\",deleteIconColor:b=\"#ffffff\",renderImage:R,hideTitle:v=!1,sectionGap:je=\"15px\",imageGap:te=\"10px\",imageGridCount:ae=3,imageBorderRadius:ie=\"15px\",style:re,className:se,message:W,hasError:P=!1,...Me})=>{let{value:m,message:L}=j(o.maxFiles),{value:z,message:oe}=j(o.maxSize),{value:x}=j(o.accepted),[p,F]=t.useState(e),[S,ne]=t.useState([]),[A,w]=t.useState(null),[le,U]=t.useState(!1),k=t.useCallback(()=>{let s=p.map(a=>{if(typeof a==\"string\")return a;if(a.type&&a.type.startsWith(\"image/\"))return URL.createObjectURL(a);{let c=a.name.split(\".\").pop()?.toLowerCase(),g=\"image/jpeg\";if(c)switch(c){case\"jpg\":case\"jpeg\":g=\"image/jpeg\";break;case\"png\":g=\"image/png\";break;case\"gif\":g=\"image/gif\";break;case\"webp\":g=\"image/webp\";break;case\"svg\":g=\"image/svg+xml\";break;default:g=\"image/jpeg\"}let i=new File([a],a.name,{type:g});return URL.createObjectURL(i)}});ne(s)},[p]);(0,K.useMount)(()=>{k()}),t.useEffect(()=>{k()},[p,k]),t.useEffect(()=>()=>{S.forEach(s=>{s.startsWith(\"blob:\")&&URL.revokeObjectURL(s)})},[S]),t.useEffect(()=>{if(!h)return;(async()=>{U(!0);try{let a=await h(p);w(a)}catch(a){w(a instanceof Error?a.message:\"Validation failed\")}finally{U(!1)}})()},[p,h]);let{getRootProps:ce,getInputProps:ge}=(0,_.useDropzone)({accept:x?typeof x==\"string\"?{[x]:[]}:x.reduce((s,a)=>{let c=a;if(a.startsWith(\".\"))switch(a.toLowerCase()){case\".jpg\":case\".jpeg\":c=\"image/jpeg\";break;case\".png\":c=\"image/png\";break;case\".gif\":c=\"image/gif\";break;case\".webp\":c=\"image/webp\";break;default:c=a}return{...s,[c]:[]}},{}):{\"image/*\":[]},minSize:0,maxSize:z,maxFiles:m,multiple:m!==1,onDropRejected(s,a){let g=s.map(i=>{let u=i.file,n=i.errors[0];return n.code===\"file-too-large\"?oe??`${u.name} is too large. Maximum size is ${(z/1048576).toFixed(1)}MB`:n.code===\"file-invalid-type\"?`${u.name} has an invalid type`:n.code===\"too-many-files\"?L??`Maximum ${m} file${m===1?\"\":\"s\"} allowed`:n.message}).filter((i,u,n)=>n.indexOf(i)===u);w(g.join(`\n`))},onDrop:s=>{if(w(null),m&&p.length+s.length>m){w(L??`Maximum ${m} file${m===1?\"\":\"s\"} allowed`);return}let a=s.map(i=>xe(i,o)).filter(i=>i!==null);if(a.length>0){w(a.join(`\n`));return}let c=s.map(i=>{if(i.type&&i.type.startsWith(\"image/\"))return i;let u=i.name.split(\".\").pop()?.toLowerCase(),n=\"image/jpeg\";if(u)switch(u){case\"jpg\":case\"jpeg\":n=\"image/jpeg\";break;case\"png\":n=\"image/png\";break;case\"gif\":n=\"image/gif\";break;case\"webp\":n=\"image/webp\";break;case\"svg\":n=\"image/svg+xml\";break;default:n=\"image/jpeg\"}return new File([i],i.name,{type:n})}),g=[...p,...c.filter(i=>p.filter(u=>typeof u==\"string\"?!1:u.name===i.name).length===0)];F(g),r&&r(g)}});t.useEffect(()=>{F(e)},[e]);let D=m?p.length>=m:!1,$=115;return t.createElement(H,{className:se,style:re},t.createElement(Z,{...D?{}:ce({className:\"dropzone\"}),isDisabled:D},t.createElement(\"input\",{...ge()}),!v&&t.createElement(G,null,d),!D&&t.createElement(O,null,l??\"Vous pouvez ajouter les images en cliquant ici.\"),p.length>0&&t.createElement(N,{gridColumns:\"value\",style:{\"--grid-columns-value\":ae,\"--image-gap-value\":te,\"--image-border-radius-value\":ie}},p.map((s,a)=>{let c=typeof s==\"string\",g=S[a]||(c?s:\"\");if(g===\"\")return null;let i={src:g??\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiNhYWEiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZSBQcmV2aWV3PC90ZXh0Pjwvc3ZnPg==\",width:$,height:$,style:{objectFit:\"cover\",...m===1?{}:{width:\"100%\",height:\"100%\"}},alt:c?s:s.name};return t.createElement(J,{key:a.toString(),singleImage:m===1},R?R(i):t.createElement(\"img\",{...i}),t.createElement(Y,null,t.createElement(X,{color:\"default\",onClick:u=>{let n=[...p.filter(T=>(typeof T==\"string\"?T:T.name)!==(c?s:s.name))];F(n),r(n),u.stopPropagation()}},y??t.createElement(ye,null))))})),t.createElement(Q,{hasError:!!A||P},P?W??\"An error occurred\":le?\"Validating...\":A??W??`Files up to ${(z??5*1024*1024)/(1024*1024)}MB, max ${m} files, accepted formats: ${Array.isArray(x)?x.join(\", \"):x}`)))},ye=()=>t.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",className:\"bi bi-trash\",viewBox:\"0 0 16 16\"},t.createElement(\"path\",{d:\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z\"}),t.createElement(\"path\",{d:\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z\"}));var I=require(\"firebase/storage\"),ee=require(\"nanoid\"),we=async({file:e,storage:r,isProd:o=!1,path:d=\"Images\"})=>{if(typeof e==\"string\")return{url:e,fileId:\"\"};let l=d.endsWith(\"/\")?d.slice(0,-1):d;l.trim().length||(l=\"Images\");let h=e.name.split(\".\").pop(),y=`${o?\"PROD\":\"DEV\"}/${l}/${(0,ee.nanoid)()}.${h}`,M=(0,I.ref)(r,y),b=(0,I.uploadBytesResumable)(M,e);await b;let R=await(0,I.getDownloadURL)(b.snapshot.ref),v=b.snapshot.ref.fullPath;return{url:R,fileId:v}};var Ie=V;0&&(module.exports={ReactImagePicker,uploadImageToFirebase});\n","import { ReactImagePicker } from \"./ReactImagePicker\";\n\nexport * from \"./types\";\n\nexport * from \"./uploadImageToFirebase\";\n\nexport default ReactImagePicker;\n\nexport * from \"./ReactImagePicker\";\n","import * as React from \"react\";\nimport Dropzone from \"dropzone\";\nimport { useDropzone } from \"react-dropzone\";\nimport { useMount } from \"react-use\";\nimport {\n  renderImageType,\n  ReactImagePickerProps,\n  FileValidationRules,\n  RuleWithMessage,\n} from \"./types\";\nimport {\n  Container,\n  DropzoneContainer,\n  Title,\n  Description,\n  ImageGrid,\n  ImageContainer,\n  DeleteButton,\n  Overlay,\n  Message,\n} from \"./styles\";\n\nDropzone.autoDiscover = false;\n\n/**\n * Helper function to get rule value and message\n */\nconst getRuleValueAndMessage = <T,>(\n  rule: RuleWithMessage<T> | undefined\n): { value: T | undefined; message?: string } => {\n  if (!rule) return { value: undefined };\n  if (typeof rule === \"object\" && \"value\" in rule) {\n    return { value: rule.value, message: rule.message };\n  }\n  return { value: rule };\n};\n\n/**\n * Default validation rules\n */\nconst DEFAULT_RULES: FileValidationRules = {\n  maxSize: {\n    value: 5 * 1024 * 1024,\n    message: \"File size must be less than 5MB\",\n  },\n  maxFiles: { value: 1, message: \"Maximum 1 file allowed\" },\n  accepted: { value: \"image/*\", message: \"Only image files are accepted\" },\n};\n\n/**\n * Validates a file against the provided rules\n */\nconst validateFile = (\n  file: File,\n  rules: FileValidationRules\n): string | null => {\n  const { value: maxSize, message: maxSizeMessage } = getRuleValueAndMessage(\n    rules.maxSize\n  );\n  const { value: accepted, message: acceptedMessage } = getRuleValueAndMessage(\n    rules.accepted\n  );\n\n  // Check file size\n  if (maxSize && file.size > maxSize) {\n    return (\n      maxSizeMessage ??\n      `File size must be less than ${(maxSize / (1024 * 1024)).toFixed(1)}MB`\n    );\n  }\n\n  // Check file type\n  if (accepted) {\n    const acceptedTypes = Array.isArray(accepted)\n      ? accepted.map((type) => type.toLowerCase())\n      : [accepted.toLowerCase()];\n\n    const fileExtension = `.${file.name.split(\".\").pop()?.toLowerCase()}`;\n    const fileType = file.type.toLowerCase();\n\n    const isAccepted = acceptedTypes.some((type) => {\n      if (type === \"image/*\") {\n        return fileType.startsWith(\"image/\");\n      }\n      return type === fileExtension || type === fileType;\n    });\n\n    if (!isAccepted) {\n      return (\n        acceptedMessage ??\n        `File type not accepted. Accepted types: ${acceptedTypes.join(\", \")}`\n      );\n    }\n  }\n\n  return null;\n};\n\n/**\n * A React component for selecting and displaying images using a drag-and-drop interface.\n *\n * @param {Object} props - The component props.\n * @param {(File | string)[]} [props.images] - Initial images to display.\n * @param {(images: (File | string)[]) => void} props.onImagesChanged - Callback triggered when the image list changes.\n * @param {FileValidationRules} [props.rules] - Validation rules for the images.\n * @param {string} [props.label] - The label displayed for the image picker.\n * @param {string} [props.description] - Additional text to describe the image picker.\n * @param {boolean} [props.validate] - Flag to indicate if the image picker is in a valid state.\n * @param {React.ReactNode} [props.deleteIcon] - Custom delete icon to be used.\n * @param {string} [props.deleteBtnColor=\"#f44336\"] - Color of the delete button.\n * @param {string} [props.deleteIconColor=\"#ffffff\"] - Color of the delete icon.\n * @param {(props: renderImageType) => React.ReactNode} [props.renderImage] - Custom component to render images.\n * @param {boolean} [props.hideTitle=false] - Flag to hide the title.\n * @param {string} [props.sectionGap=\"15px\"] - Gap between sections (ex: title, description, images, etc...) in pixels.\n * @param {string} [props.imageGap=\"10px\"] - Gap between images in pixels.\n * @param {number} [props.imageGridCount=3] - The number of images to display in the grid.\n * @param {string} [props.imageBorderRadius=\"15px\"] - The border radius of the images.\n * @returns {JSX.Element} The ReactImagePicker component.\n */\nexport const ReactImagePicker: React.FC<ReactImagePickerProps> = ({\n  images = [],\n  onImagesChanged,\n  rules = DEFAULT_RULES,\n  label = \"Images\",\n  description,\n  validate,\n  deleteIcon,\n  deleteBtnColor = \"#f44336\",\n  deleteIconColor = \"#ffffff\",\n  renderImage,\n  hideTitle = false,\n  sectionGap = \"15px\",\n  imageGap = \"10px\",\n  imageGridCount = 3,\n  imageBorderRadius = \"15px\",\n  style,\n  className,\n  message,\n  hasError = false,\n  ...props\n}) => {\n  const { value: maxFiles, message: maxFilesMessage } = getRuleValueAndMessage(\n    rules.maxFiles\n  );\n  const { value: maxSize, message: maxSizeMessage } = getRuleValueAndMessage(\n    rules.maxSize\n  );\n  const { value: accepted } = getRuleValueAndMessage(rules.accepted);\n\n  /**\n   * IMAGES SELECTED BY THE USER\n   */\n  const [files, setFiles] = React.useState<(File | string)[]>(images);\n\n  const [previewUrls, setPreviewUrls] = React.useState<string[]>([]);\n\n  const [validationMessage, setValidationMessage] = React.useState<\n    string | null\n  >(null);\n\n  const [isValidating, setIsValidating] = React.useState(false);\n\n  /**\n   * Generate preview URLs for files\n   */\n  const generatePreviewUrls = React.useCallback(() => {\n    const urls = files.map((file) => {\n      if (typeof file === \"string\") {\n        return file;\n      } else {\n        // Check if the file has a valid MIME type\n        if (file.type && file.type.startsWith(\"image/\")) {\n          return URL.createObjectURL(file);\n        } else {\n          // If the file doesn't have a valid MIME type, try to determine it from the extension\n          const extension = file.name.split(\".\").pop()?.toLowerCase();\n          let mimeType = \"image/jpeg\"; // Default to jpeg\n\n          if (extension) {\n            switch (extension) {\n              case \"jpg\":\n              case \"jpeg\":\n                mimeType = \"image/jpeg\";\n                break;\n              case \"png\":\n                mimeType = \"image/png\";\n                break;\n              case \"gif\":\n                mimeType = \"image/gif\";\n                break;\n              case \"webp\":\n                mimeType = \"image/webp\";\n                break;\n              case \"svg\":\n                mimeType = \"image/svg+xml\";\n                break;\n              default:\n                mimeType = \"image/jpeg\"; // Default fallback\n            }\n          }\n\n          // Create a new File object with the correct MIME type\n          const fileWithMimeType = new File([file], file.name, {\n            type: mimeType,\n          });\n          return URL.createObjectURL(fileWithMimeType);\n        }\n      }\n    });\n\n    setPreviewUrls(urls);\n  }, [files]);\n\n  /**\n   * Generate preview URLs on mount and when files change\n   */\n  useMount(() => {\n    generatePreviewUrls();\n  });\n\n  React.useEffect(() => {\n    generatePreviewUrls();\n  }, [files, generatePreviewUrls]);\n\n  /**\n   * Clean up preview URLs when component unmounts or files change\n   */\n  React.useEffect(() => {\n    return () => {\n      // Revoke all object URLs to prevent memory leaks\n      previewUrls.forEach((url) => {\n        if (url.startsWith(\"blob:\")) {\n          URL.revokeObjectURL(url);\n        }\n      });\n    };\n  }, [previewUrls]);\n\n  /**\n   * Handle validation\n   */\n  React.useEffect(() => {\n    if (!validate) return;\n\n    const validateImages = async () => {\n      setIsValidating(true);\n      try {\n        const result = await validate(files);\n        setValidationMessage(result);\n      } catch (error) {\n        setValidationMessage(\n          error instanceof Error ? error.message : \"Validation failed\"\n        );\n      } finally {\n        setIsValidating(false);\n      }\n    };\n\n    validateImages();\n  }, [files, validate]);\n\n  const { getRootProps, getInputProps } = useDropzone({\n    accept: accepted\n      ? typeof accepted === \"string\"\n        ? { [accepted]: [] }\n        : accepted.reduce((acc, type) => {\n            // Convert file extensions to MIME types\n            let mimeType: string = type;\n            if (type.startsWith(\".\")) {\n              switch (type.toLowerCase()) {\n                case \".jpg\":\n                case \".jpeg\":\n                  mimeType = \"image/jpeg\";\n                  break;\n                case \".png\":\n                  mimeType = \"image/png\";\n                  break;\n                case \".gif\":\n                  mimeType = \"image/gif\";\n                  break;\n                case \".webp\":\n                  mimeType = \"image/webp\";\n                  break;\n                default:\n                  // Keep the original type if it's not recognized\n                  mimeType = type;\n              }\n            }\n            return { ...acc, [mimeType]: [] };\n          }, {})\n      : { \"image/*\": [] },\n    minSize: 0,\n    maxSize: maxSize,\n    maxFiles: maxFiles,\n    multiple: maxFiles === 1 ? false : true,\n    onDropRejected(fileRejections, event) {\n      const errors = fileRejections.map((rejection) => {\n        const file = rejection.file;\n        const error = rejection.errors[0];\n\n        if (error.code === \"file-too-large\") {\n          return (\n            maxSizeMessage ??\n            `${file.name} is too large. Maximum size is ${(\n              maxSize! /\n              (1024 * 1024)\n            ).toFixed(1)}MB`\n          );\n        }\n\n        if (error.code === \"file-invalid-type\") {\n          return `${file.name} has an invalid type`;\n        }\n\n        if (error.code === \"too-many-files\") {\n          return (\n            maxFilesMessage ??\n            `Maximum ${maxFiles} file${maxFiles === 1 ? \"\" : \"s\"} allowed`\n          );\n        }\n\n        return error.message;\n      });\n\n      const uniqueErrors = errors.filter(\n        (error, index, self) => self.indexOf(error) === index\n      );\n\n      setValidationMessage(uniqueErrors.join(\"\\n\"));\n    },\n    onDrop: (acceptedFiles) => {\n      setValidationMessage(null);\n\n      // Check if adding these files would exceed the maximum\n      if (maxFiles && files.length + acceptedFiles.length > maxFiles) {\n        setValidationMessage(\n          maxFilesMessage ??\n            `Maximum ${maxFiles} file${maxFiles === 1 ? \"\" : \"s\"} allowed`\n        );\n        return;\n      }\n\n      // Validate each file against rules\n      const validationErrors = acceptedFiles\n        .map((file) => validateFile(file, rules))\n        .filter((error): error is string => error !== null);\n\n      if (validationErrors.length > 0) {\n        setValidationMessage(validationErrors.join(\"\\n\"));\n        return;\n      }\n\n      // Process files to ensure they have proper MIME types\n      const processedFiles = acceptedFiles.map((file) => {\n        // If the file already has a valid MIME type, use it as is\n        if (file.type && file.type.startsWith(\"image/\")) {\n          return file;\n        }\n\n        // Otherwise, determine the MIME type from the extension\n        const extension = file.name.split(\".\").pop()?.toLowerCase();\n        let mimeType = \"image/jpeg\"; // Default to jpeg\n\n        if (extension) {\n          switch (extension) {\n            case \"jpg\":\n            case \"jpeg\":\n              mimeType = \"image/jpeg\";\n              break;\n            case \"png\":\n              mimeType = \"image/png\";\n              break;\n            case \"gif\":\n              mimeType = \"image/gif\";\n              break;\n            case \"webp\":\n              mimeType = \"image/webp\";\n              break;\n            case \"svg\":\n              mimeType = \"image/svg+xml\";\n              break;\n            default:\n              mimeType = \"image/jpeg\"; // Default fallback\n          }\n        }\n\n        // Create a new File object with the correct MIME type\n        return new File([file], file.name, { type: mimeType });\n      });\n\n      const newList = [\n        ...files,\n        ...processedFiles.filter(\n          (file) =>\n            files.filter((_file: File | string) => {\n              if (typeof _file === \"string\") return false;\n              return _file.name === file.name;\n            }).length === 0\n        ),\n      ];\n\n      /**\n       * CHANGE THE LOCAL VERSION OF THE IMAGES\n       */\n      setFiles(newList);\n\n      /**\n       * CHANGE THE PARENT VERSION TOO\n       */\n      if (onImagesChanged) {\n        onImagesChanged(newList);\n      }\n    },\n  });\n\n  /**\n   * Handle initial File objects\n   */\n  React.useEffect(() => {\n    setFiles(images);\n  }, [images]);\n\n  const reachedLimit = maxFiles ? files.length >= maxFiles : false;\n\n  let size = 115;\n\n  return (\n    <Container className={className} style={style}>\n      <DropzoneContainer\n        {...(!reachedLimit ? getRootProps({ className: \"dropzone\" }) : {})}\n        isDisabled={reachedLimit}\n      >\n        <input {...getInputProps()} />\n\n        {!hideTitle && <Title>{label}</Title>}\n\n        {!reachedLimit && (\n          <Description>\n            {description ?? \"Vous pouvez ajouter les images en cliquant ici.\"}\n          </Description>\n        )}\n\n        {files.length > 0 && (\n          <ImageGrid\n            gridColumns=\"value\"\n            style={\n              {\n                \"--grid-columns-value\": imageGridCount,\n                \"--image-gap-value\": imageGap,\n                \"--image-border-radius-value\": imageBorderRadius,\n              } as React.CSSProperties\n            }\n          >\n            {files.map((file, index) => {\n              const fileIsString = typeof file === \"string\";\n              const previewUrl =\n                previewUrls[index] || (fileIsString ? file : \"\");\n\n              if (previewUrl === \"\") return null;\n\n              const imgProps: renderImageType = {\n                src:\n                  previewUrl ??\n                  \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiNhYWEiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZSBQcmV2aWV3PC90ZXh0Pjwvc3ZnPg==\",\n                width: size,\n                height: size,\n                style: {\n                  objectFit: \"cover\",\n                  ...(maxFiles === 1 ? {} : { width: \"100%\", height: \"100%\" }),\n                },\n                alt: fileIsString ? file : file.name,\n              };\n\n              return (\n                <ImageContainer\n                  key={index.toString()}\n                  singleImage={maxFiles === 1}\n                >\n                  {renderImage ? renderImage(imgProps) : <img {...imgProps} />}\n                  <Overlay>\n                    <DeleteButton\n                      color=\"default\"\n                      onClick={(e) => {\n                        const _files = [\n                          ...files.filter((f) => {\n                            const isString = typeof f === \"string\";\n                            const name = isString\n                              ? (f as string)\n                              : (f as File).name;\n\n                            return name !== (fileIsString ? file : file.name);\n                          }),\n                        ];\n\n                        setFiles(_files);\n\n                        onImagesChanged(_files);\n\n                        e.stopPropagation();\n                      }}\n                    >\n                      {deleteIcon ?? <DeleteIcon />}\n                    </DeleteButton>\n                  </Overlay>\n                </ImageContainer>\n              );\n            })}\n          </ImageGrid>\n        )}\n\n        <Message hasError={!!validationMessage || hasError}>\n          {hasError\n            ? message ?? \"An error occurred\"\n            : isValidating\n            ? \"Validating...\"\n            : validationMessage ??\n              message ??\n              `Files up to ${\n                (maxSize ?? 5 * 1024 * 1024) / (1024 * 1024)\n              }MB, max ${maxFiles} files, accepted formats: ${\n                Array.isArray(accepted) ? accepted.join(\", \") : accepted\n              }`}\n        </Message>\n      </DropzoneContainer>\n    </Container>\n  );\n};\n\nconst DeleteIcon = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    fill=\"currentColor\"\n    className=\"bi bi-trash\"\n    viewBox=\"0 0 16 16\"\n  >\n    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z\" />\n    <path d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z\" />\n  </svg>\n);\n","import { styled } from \"@stitches/react\";\n\nexport const Container = styled(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  border: \"1px dashed #e0e0e0\",\n});\n\nexport const DropzoneContainer = styled(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  gap: \"15px\",\n  border: 0,\n  padding: 0,\n  variants: {\n    isDisabled: {\n      true: { cursor: \"auto\" },\n      false: { cursor: \"pointer\" },\n    },\n  },\n});\n\nexport const Title = styled(\"h2\", {\n  fontWeight: 700,\n  fontSize: \"2rem\",\n  lineHeight: \"1em\",\n  textAlign: \"center\",\n  margin: 0,\n  marginTop: \"15px\",\n});\n\nexport const Description = styled(\"p\", {\n  fontWeight: 500,\n  fontSize: \"1rem\",\n  lineHeight: \"1.3em\",\n  textAlign: \"center\",\n  margin: 0,\n});\n\nexport const Message = styled(\"p\", {\n  fontSize: \"0.75rem\",\n  lineHeight: \"1.66\",\n  textAlign: \"center\",\n  margin: 0,\n  color: \"rgba(0, 0, 0, 0.5)\",\n  variants: {\n    hasError: {\n      true: { color: \"#d32f2f\", fontSize: \"0.8rem\" },\n      false: { color: \"inherit\" },\n    },\n  },\n});\n\nexport const ImageGrid = styled(\"div\", {\n  display: \"grid\",\n  maxHeight: 380,\n  gridTemplateColumns: \"repeat(var(--grid-columns, 3), 1fr)\",\n  gap: \"var(--image-gap, 10px)\",\n  variants: {\n    gridColumns: {\n      value: {\n        \"--grid-columns\": \"var(--grid-columns-value, 3)\",\n        \"--image-gap\": \"var(--image-gap-value, 10px)\",\n      },\n    },\n  },\n  defaultVariants: {\n    gridColumns: \"value\",\n  },\n});\n\nexport const ImageContainer = styled(\"div\", {\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\",\n  borderRadius: \"var(--image-border-radius-value, 15px)\",\n  overflow: \"hidden\",\n  \"& img\": {\n    width: \"100%\",\n    height: \"100%\",\n    objectFit: \"cover\",\n    borderRadius: \"var(--image-border-radius-value, 15px)\",\n  },\n  variants: {\n    singleImage: {\n      true: {\n        maxWidth: \"400px\",\n        margin: \"0 auto\",\n      },\n    },\n  },\n});\n\nexport const DeleteButton = styled(\"button\", {\n  width: 32,\n  height: 32,\n  borderRadius: \"50%\",\n  border: \"none\",\n  cursor: \"pointer\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  padding: 0,\n  boxShadow: \"none\",\n  variants: {\n    color: {\n      default: {\n        backgroundColor: \"#f44336\",\n        color: \"#ffffff\",\n      },\n    },\n  },\n});\n\nexport const Overlay = styled(\"div\", {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  width: \"100%\",\n  height: \"100%\",\n  borderRadius: \"15px\",\n  zIndex: 10,\n  position: \"absolute\",\n  top: 0,\n  left: 0,\n  backgroundColor: \"rgba(255,255,255,0)\",\n  backdropFilter: \"blur(0)\",\n  transition: \"all linear 0.25s\",\n  opacity: 0,\n  \"&:hover\": {\n    backgroundColor: \"rgba(255,255,255,0.25)\",\n    backdropFilter: \"blur(5px)\",\n    opacity: 1,\n  },\n});\n","import { getDownloadURL, ref, uploadBytesResumable } from \"firebase/storage\";\nimport { UploadImageToFirebaseType } from \"./types\";\nimport { nanoid } from \"nanoid\";\n\n/**\n * Uploads a file to Firebase Storage and returns the download URL.\n * @param {File|string} file The file to upload, or the URL of the file\n * @param {FirebaseStorage} storage The Firebase Storage instance\n * @param {boolean} [isProd=false] Whether or not this is a production upload\n * @param {string} [path='Images'] The path to upload the file to\n * @returns {Promise<string>} The download URL of the uploaded file\n */\nexport const uploadImageToFirebase: UploadImageToFirebaseType = async ({\n  file,\n  storage,\n  isProd = false,\n  path = \"Images\",\n}) => {\n  if (typeof file === \"string\") return { url: file, fileId: \"\" };\n\n  // The path is the full path including the filename, so we'll remove the trailing slash\n  let _path = path.endsWith(\"/\") ? path.slice(0, -1) : path;\n\n  // If the path is empty, we'll default to \"Images\"\n  if (!_path.trim().length) _path = \"Images\";\n\n  // The full path is the path plus the filename\n  const extension = file.name.split(\".\").pop();\n  const fullPath = `${\n    isProd ? \"PROD\" : \"DEV\"\n  }/${_path}/${nanoid()}.${extension}`;\n\n  // Create a reference to the file\n  const storageRef = ref(storage, fullPath);\n\n  // Start the upload\n  const uploadTask = uploadBytesResumable(storageRef, file);\n\n  // Wait for the upload to finish\n  await uploadTask;\n\n  // Get the download URL\n  const url = await getDownloadURL(uploadTask.snapshot.ref);\n\n  // Get the file ID from the reference path\n  const fileId = uploadTask.snapshot.ref.fullPath;\n\n  // Return the download URL\n  return { url, fileId };\n};\n"]}