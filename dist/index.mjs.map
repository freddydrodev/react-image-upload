{"version":3,"sources":["../src/ReactImagePicker.tsx","../src/styles.ts","../src/uploadImage.ts","../src/index.tsx"],"names":["React","Dropzone","useDropzone","styled","Container","display","flexDirection","border","DropzoneContainer","gap","padding","variants","isDisabled","true","cursor","false","Title","fontWeight","fontSize","lineHeight","textAlign","margin","marginTop","Description","Message","color","hasError","ImageGrid","maxHeight","gridTemplateColumns","gridColumns","value","defaultVariants","ImageContainer","position","width","height","borderRadius","overflow","objectFit","singleImage","maxWidth","DeleteButton","alignItems","justifyContent","boxShadow","default","backgroundColor","Overlay","zIndex","top","left","backdropFilter","transition","opacity","autoDiscover","getRuleValueAndMessage","rule","message","DEFAULT_RULES","maxSize","maxFiles","accepted","validateFile","file","rules","maxSizeMessage","acceptedMessage","size","toFixed","acceptedTypes","Array","isArray","map","type","toLowerCase","fileExtension","name","split","pop","fileType","some","startsWith","join","ReactImagePicker","images","onImagesChanged","label","description","validate","deleteIcon","deleteBtnColor","deleteIconColor","renderImage","hideTitle","sectionGap","imageGap","imageGridCount","imageBorderRadius","style","className","props","maxFilesMessage","e","useState","files","setFiles","validationMessage","setValidationMessage","isValidating","setIsValidating","useEffect","result","error","Error","accept","reduce","acc","minSize","multiple","onDropRejected","fileRejections","event","errors","rejection","code","console","log","uniqueErrors","filter","index","self","indexOf","onDrop","acceptedFiles","length","validationErrors","newList","Object","assign","preview","URL","createObjectURL","_file","getRootProps","getInputProps","processedFiles","File","forEach","revokeObjectURL","reachedLimit","createElement","src","imgProps","alt","key","onClick","_files","f","stopPropagation","DeleteIcon","xmlns","fill","viewBox","d","getDownloadURL","ref","uploadBytesResumable","uploadImage","storage","isProd","path","_path","fullPath","storageRef","uploadTask","endsWith","slice","trim","snapshot","index_default"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport Dropzone from \"dropzone\";\nimport { useDropzone } from \"react-dropzone\";\nimport {\n  renderImageType,\n  ReactImagePickerProps,\n  FileValidationRules,\n  RuleWithMessage,\n} from \"./types\";\nimport { styled } from \"@stitches/react\";\nimport {\n  Container,\n  DropzoneContainer,\n  Title,\n  Description,\n  ImageGrid,\n  ImageContainer,\n  DeleteButton,\n  Overlay,\n  Message,\n} from \"./styles\";\n\nDropzone.autoDiscover = false;\n\n/**\n * Helper function to get rule value and message\n */\nconst getRuleValueAndMessage = <T,>(\n  rule: RuleWithMessage<T> | undefined\n): { value: T | undefined; message?: string } => {\n  if (!rule) return { value: undefined };\n  if (typeof rule === \"object\" && \"value\" in rule) {\n    return { value: rule.value, message: rule.message };\n  }\n  return { value: rule };\n};\n\n/**\n * Default validation rules\n */\nconst DEFAULT_RULES: FileValidationRules = {\n  maxSize: {\n    value: 5 * 1024 * 1024,\n    message: \"File size must be less than 5MB\",\n  },\n  maxFiles: { value: 1, message: \"Maximum 1 file allowed\" },\n  accepted: { value: \"image/*\", message: \"Only image files are accepted\" },\n};\n\n/**\n * Validates a file against the provided rules\n */\nconst validateFile = (\n  file: File,\n  rules: FileValidationRules\n): string | null => {\n  const { value: maxSize, message: maxSizeMessage } = getRuleValueAndMessage(\n    rules.maxSize\n  );\n  const { value: accepted, message: acceptedMessage } = getRuleValueAndMessage(\n    rules.accepted\n  );\n\n  // Check file size\n  if (maxSize && file.size > maxSize) {\n    return (\n      maxSizeMessage ??\n      `File size must be less than ${(maxSize / (1024 * 1024)).toFixed(1)}MB`\n    );\n  }\n\n  // Check file type\n  if (accepted) {\n    const acceptedTypes = Array.isArray(accepted)\n      ? accepted.map((type) => type.toLowerCase())\n      : [accepted.toLowerCase()];\n\n    const fileExtension = `.${file.name.split(\".\").pop()?.toLowerCase()}`;\n    const fileType = file.type.toLowerCase();\n\n    const isAccepted = acceptedTypes.some((type) => {\n      if (type === \"image/*\") {\n        return fileType.startsWith(\"image/\");\n      }\n      return type === fileExtension || type === fileType;\n    });\n\n    if (!isAccepted) {\n      return (\n        acceptedMessage ??\n        `File type not accepted. Accepted types: ${acceptedTypes.join(\", \")}`\n      );\n    }\n  }\n\n  return null;\n};\n\n/**\n * A React component for selecting and displaying images using a drag-and-drop interface.\n *\n * @param {Object} props - The component props.\n * @param {(File | string)[]} [props.images] - Initial images to display.\n * @param {(images: (File | string)[]) => void} props.onImagesChanged - Callback triggered when the image list changes.\n * @param {FileValidationRules} [props.rules] - Validation rules for the images.\n * @param {string} [props.label] - The label displayed for the image picker.\n * @param {string} [props.description] - Additional text to describe the image picker.\n * @param {boolean} [props.validate] - Flag to indicate if the image picker is in a valid state.\n * @param {React.ReactNode} [props.deleteIcon] - Custom delete icon to be used.\n * @param {string} [props.deleteBtnColor=\"#f44336\"] - Color of the delete button.\n * @param {string} [props.deleteIconColor=\"#ffffff\"] - Color of the delete icon.\n * @param {(props: renderImageType) => React.ReactNode} [props.renderImage] - Custom component to render images.\n * @param {boolean} [props.hideTitle=false] - Flag to hide the title.\n * @param {string} [props.sectionGap=\"15px\"] - Gap between sections (ex: title, description, images, etc...) in pixels.\n * @param {string} [props.imageGap=\"10px\"] - Gap between images in pixels.\n * @param {number} [props.imageGridCount=3] - The number of images to display in the grid.\n * @param {string} [props.imageBorderRadius=\"15px\"] - The border radius of the images.\n * @returns {JSX.Element} The ReactImagePicker component.\n */\nexport const ReactImagePicker: React.FC<ReactImagePickerProps> = ({\n  images = [],\n  onImagesChanged,\n  rules = DEFAULT_RULES,\n  label = \"Images\",\n  description,\n  validate,\n  deleteIcon,\n  deleteBtnColor = \"#f44336\",\n  deleteIconColor = \"#ffffff\",\n  renderImage,\n  hideTitle = false,\n  sectionGap = \"15px\",\n  imageGap = \"10px\",\n  imageGridCount = 3,\n  imageBorderRadius = \"15px\",\n  style,\n  className,\n  message,\n  hasError = false,\n  ...props\n}) => {\n  const { value: maxFiles, message: maxFilesMessage } = getRuleValueAndMessage(\n    rules.maxFiles\n  );\n  const { value: maxSize, message: maxSizeMessage } = getRuleValueAndMessage(\n    rules.maxSize\n  );\n  const { value: accepted } = getRuleValueAndMessage(rules.accepted);\n\n  /**\n   * IMAGES SELECTED BY THE USER\n   */\n  const [files, setFiles] = React.useState<(File | string)[]>(images);\n  const [validationMessage, setValidationMessage] = React.useState<\n    string | null\n  >(null);\n  const [isValidating, setIsValidating] = React.useState(false);\n\n  /**\n   * Handle validation\n   */\n  React.useEffect(() => {\n    if (!validate) return;\n\n    const validateImages = async () => {\n      setIsValidating(true);\n      try {\n        const result = await validate(files);\n        setValidationMessage(result);\n      } catch (error) {\n        setValidationMessage(\n          error instanceof Error ? error.message : \"Validation failed\"\n        );\n      } finally {\n        setIsValidating(false);\n      }\n    };\n\n    validateImages();\n  }, [files, validate]);\n\n  const { getRootProps, getInputProps } = useDropzone({\n    accept: accepted\n      ? typeof accepted === \"string\"\n        ? { [accepted]: [] }\n        : accepted.reduce((acc, type) => ({ ...acc, [type]: [] }), {})\n      : { \"image/*\": [] },\n    minSize: 0,\n    maxSize: maxSize,\n    maxFiles: maxFiles,\n    multiple: maxFiles === 1 ? false : true,\n    onDropRejected(fileRejections, event) {\n      const errors = fileRejections.map((rejection) => {\n        const file = rejection.file;\n        const error = rejection.errors[0];\n\n        if (error.code === \"file-too-large\") {\n          return (\n            maxSizeMessage ??\n            `${file.name} is too large. Maximum size is ${(\n              maxSize! /\n              (1024 * 1024)\n            ).toFixed(1)}MB`\n          );\n        }\n\n        if (error.code === \"file-invalid-type\") {\n          return `${file.name} has an invalid type`;\n        }\n\n        if (error.code === \"too-many-files\") {\n          return (\n            maxFilesMessage ??\n            `Maximum ${maxFiles} file${maxFiles === 1 ? \"\" : \"s\"} allowed`\n          );\n        }\n\n        return error.message;\n      });\n\n      console.log(\"ERRORS REJECTED =>\", errors);\n\n      const uniqueErrors = errors.filter(\n        (error, index, self) => self.indexOf(error) === index\n      );\n\n      setValidationMessage(uniqueErrors.join(\"\\n\"));\n    },\n    onDrop: (acceptedFiles) => {\n      // Check if adding these files would exceed the maximum\n      if (maxFiles && files.length + acceptedFiles.length > maxFiles) {\n        setValidationMessage(\n          maxFilesMessage ??\n            `Maximum ${maxFiles} file${maxFiles === 1 ? \"\" : \"s\"} allowed`\n        );\n        return;\n      }\n\n      // Validate each file against rules\n      const validationErrors = acceptedFiles\n        .map((file) => validateFile(file, rules))\n        .filter((error): error is string => error !== null);\n\n      console.log(\"ERRORS =>\", validationErrors);\n\n      if (validationErrors.length > 0) {\n        setValidationMessage(validationErrors.join(\"\\n\"));\n        return;\n      }\n\n      const newList = [\n        ...files,\n        ...acceptedFiles\n          .map((file) =>\n            Object.assign(file, {\n              preview: URL.createObjectURL(file),\n            })\n          )\n          .filter(\n            (file) =>\n              files.filter((_file: File | string) => {\n                if (typeof _file === \"string\") return false;\n                return _file.name === file.name;\n              }).length === 0\n          ),\n      ];\n\n      /**\n       * CHANGE THE LOCAL VERSION OF THE IMAGES\n       */\n      setFiles(newList);\n\n      /**\n       * CHANGE THE PARENT VERSION TOO\n       */\n      if (onImagesChanged) {\n        onImagesChanged(newList);\n      }\n    },\n  });\n\n  /**\n   * Handle initial File objects by creating preview URLs\n   */\n  React.useEffect(() => {\n    const processedFiles = images.map((file) => {\n      if (file instanceof File) {\n        return Object.assign(file, {\n          preview: URL.createObjectURL(file),\n        });\n      }\n      return file;\n    });\n    setFiles(processedFiles);\n  }, [images]);\n\n  /**\n   * USED FOR PERFORMANCE\n   */\n  React.useEffect(\n    () => () => {\n      // Make sure to revoke the data uris to avoid memory leaks\n      files.forEach((file) => URL.revokeObjectURL((file as any).preview));\n    },\n    [files]\n  );\n\n  const reachedLimit = maxFiles ? files.length >= maxFiles : false;\n\n  let gridTemplateColumns = `repeat(${imageGridCount}, 1fr)`;\n\n  let size = 115;\n\n  if (maxFiles === 1) {\n    gridTemplateColumns = \"1fr\";\n    size = 200;\n  }\n\n  if (maxFiles === 2) {\n    gridTemplateColumns = \"1fr 1fr\";\n    size = 175;\n  }\n\n  return (\n    <Container className={className} style={style}>\n      <DropzoneContainer\n        {...(!reachedLimit ? getRootProps({ className: \"dropzone\" }) : {})}\n        isDisabled={reachedLimit}\n      >\n        <input {...getInputProps()} />\n        {!hideTitle && <Title>{label}</Title>}\n        <Description>\n          {description ?? \"Vous pouvez ajouter les images en cliquant ici.\"}\n        </Description>\n\n        <ImageGrid\n          gridColumns=\"value\"\n          style={\n            {\n              \"--grid-columns-value\": imageGridCount,\n              \"--image-gap-value\": imageGap,\n              \"--image-border-radius-value\": imageBorderRadius,\n            } as React.CSSProperties\n          }\n        >\n          {files.map((file) => {\n            const fileIsString = typeof file === \"string\";\n\n            const _file = fileIsString\n              ? { name: file as string, preview: file as string }\n              : (file as File);\n\n            const src =\n              typeof _file === \"string\" ? _file : (_file as any).preview;\n\n            const imgProps: renderImageType = {\n              src: src,\n              width: size,\n              height: size,\n              style: {\n                objectFit: \"cover\",\n                ...(maxFiles === 1 ? {} : { width: \"100%\", height: \"100%\" }),\n              },\n              alt: typeof _file === \"string\" ? _file : (_file as any).name,\n            };\n\n            return (\n              <ImageContainer key={src} singleImage={maxFiles === 1}>\n                {renderImage ? renderImage(imgProps) : <img {...imgProps} />}\n                <Overlay>\n                  <DeleteButton\n                    color=\"default\"\n                    onClick={(e) => {\n                      const _files = [\n                        ...files.filter((f) => {\n                          const isString = typeof f === \"string\";\n                          const name = isString\n                            ? (f as string)\n                            : (f as File).name;\n\n                          return name !== _file.name;\n                        }),\n                      ];\n\n                      setFiles(_files);\n\n                      onImagesChanged(_files);\n\n                      e.stopPropagation();\n                    }}\n                  >\n                    {deleteIcon ?? <DeleteIcon />}\n                  </DeleteButton>\n                </Overlay>\n              </ImageContainer>\n            );\n          })}\n        </ImageGrid>\n        <Message hasError={!!validationMessage || reachedLimit || hasError}>\n          {hasError\n            ? message ?? \"An error occurred\"\n            : isValidating\n            ? \"Validating...\"\n            : validationMessage ||\n              (reachedLimit\n                ? maxFilesMessage ?? `Maximum ${maxFiles} files allowed`\n                : message ??\n                  `Files up to ${\n                    (maxSize ?? 5 * 1024 * 1024) / (1024 * 1024)\n                  }MB, max ${maxFiles} files, accepted formats: ${\n                    Array.isArray(accepted) ? accepted.join(\", \") : accepted\n                  }`)}\n        </Message>\n      </DropzoneContainer>\n    </Container>\n  );\n};\n\nconst DeleteIcon = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    fill=\"currentColor\"\n    className=\"bi bi-trash\"\n    viewBox=\"0 0 16 16\"\n  >\n    <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z\" />\n    <path d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z\" />\n  </svg>\n);\n","import { styled } from \"@stitches/react\";\n\nexport const Container = styled(\"div\", {\n  // padding: \"20px\",\n  // boxSizing: \"border-box\",\n  // width: 400,\n  display: \"flex\",\n  flexDirection: \"column\",\n  border: \"1px dashed #e0e0e0\",\n  // borderRadius: \"15px\",\n  // backgroundColor: \"rgba(0, 0, 0, 0.015)\",\n});\n\nexport const DropzoneContainer = styled(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  gap: \"15px\",\n  border: 0,\n  padding: 0,\n  variants: {\n    isDisabled: {\n      true: { cursor: \"auto\" },\n      false: { cursor: \"pointer\" },\n    },\n  },\n});\n\nexport const Title = styled(\"h2\", {\n  fontWeight: 700,\n  fontSize: \"2rem\",\n  lineHeight: \"1em\",\n  textAlign: \"center\",\n  margin: 0,\n  marginTop: \"15px\",\n});\n\nexport const Description = styled(\"p\", {\n  fontWeight: 500,\n  fontSize: \"1rem\",\n  lineHeight: \"1.3em\",\n  textAlign: \"center\",\n  margin: 0,\n});\n\nexport const Message = styled(\"p\", {\n  fontSize: \"0.75rem\",\n  lineHeight: \"1.66\",\n  textAlign: \"center\",\n  margin: 0,\n  color: \"rgba(0, 0, 0, 0.5)\",\n  variants: {\n    hasError: {\n      true: { color: \"#d32f2f\", fontSize: \"0.8rem\" },\n      false: { color: \"inherit\" },\n    },\n  },\n});\n\nexport const ImageGrid = styled(\"div\", {\n  display: \"grid\",\n  maxHeight: 380,\n  gridTemplateColumns: \"repeat(var(--grid-columns, 3), 1fr)\",\n  gap: \"var(--image-gap, 10px)\",\n  variants: {\n    gridColumns: {\n      value: {\n        \"--grid-columns\": \"var(--grid-columns-value, 3)\",\n        \"--image-gap\": \"var(--image-gap-value, 10px)\",\n      },\n    },\n  },\n  defaultVariants: {\n    gridColumns: \"value\",\n  },\n});\n\nexport const ImageContainer = styled(\"div\", {\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\",\n  borderRadius: \"var(--image-border-radius-value, 15px)\",\n  overflow: \"hidden\",\n  \"& img\": {\n    width: \"100%\",\n    height: \"100%\",\n    objectFit: \"cover\",\n    borderRadius: \"var(--image-border-radius-value, 15px)\",\n  },\n  variants: {\n    singleImage: {\n      true: {\n        maxWidth: \"400px\",\n        margin: \"0 auto\",\n      },\n    },\n  },\n});\n\nexport const DeleteButton = styled(\"button\", {\n  width: 32,\n  height: 32,\n  borderRadius: \"50%\",\n  border: \"none\",\n  cursor: \"pointer\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  padding: 0,\n  boxShadow: \"none\",\n  variants: {\n    color: {\n      default: {\n        backgroundColor: \"#f44336\",\n        color: \"#ffffff\",\n      },\n    },\n  },\n});\n\nexport const Overlay = styled(\"div\", {\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  width: \"100%\",\n  height: \"100%\",\n  borderRadius: \"15px\",\n  zIndex: 10,\n  position: \"absolute\",\n  top: 0,\n  left: 0,\n  backgroundColor: \"rgba(255,255,255,0)\",\n  backdropFilter: \"blur(0)\",\n  transition: \"all linear 0.25s\",\n  opacity: 0,\n  \"&:hover\": {\n    backgroundColor: \"rgba(255,255,255,0.25)\",\n    backdropFilter: \"blur(5px)\",\n    opacity: 1,\n  },\n});\n","import { getDownloadURL, ref, uploadBytesResumable } from \"firebase/storage\";\nimport { UploadImageType } from \"./types\";\n\n/**\n * Uploads a file to Firebase Storage and returns the download URL.\n * @param {File|string} file The file to upload, or the URL of the file\n * @param {FirebaseStorage} storage The Firebase Storage instance\n * @param {boolean} [isProd=false] Whether or not this is a production upload\n * @param {string} [path='Images'] The path to upload the file to\n * @returns {Promise<string>} The download URL of the uploaded file\n */\nexport const uploadImage: UploadImageType = async ({\n  file,\n  storage,\n  isProd = false,\n  path = \"Images\",\n}): Promise<string> => {\n  if (typeof file === \"string\") return file;\n\n  // The path is the full path including the filename, so we'll remove the trailing slash\n  let _path = path.endsWith(\"/\") ? path.slice(0, -1) : path;\n\n  // If the path is empty, we'll default to \"Images\"\n  if (!_path.trim().length) _path = \"Images\";\n\n  // The full path is the path plus the filename\n  const fullPath = `${isProd ? \"\" : \"DEV/\"}${_path}/${file.name}`;\n\n  // Create a reference to the file\n  const storageRef = ref(storage, fullPath);\n\n  // Start the upload\n  const uploadTask = uploadBytesResumable(storageRef, file);\n\n  // Wait for the upload to finish\n  await uploadTask;\n\n  // Get the download URL\n  const url = await getDownloadURL(uploadTask.snapshot.ref);\n\n  // Return the download URL\n  return url;\n};\n","import { ReactImagePicker } from \"./ReactImagePicker\";\n\nexport * from \"./types\";\n\nexport * from \"./uploadImage\";\n\nexport default ReactImagePicker;\n\nexport * from \"./ReactImagePicker\";\n"]}